!function(n){"use strict";n.module("ngLocationSearch",[]).directive("ngLocationSearch",["$log","$timeout","$location","$window","$parse","$httpParamSerializer",function(i,e,t,o,a,c){return{restrict:"A",require:["?ngModel","?^form"],link:function(r,u,l,s){function f(i){return!!n.isString(i)&&i.replace(/\/$/,"")}function h(a){var u={},s=r.$eval(l.ngLocationSearchReset),h=f(l.ngLocationSearchUrl),S=f(o.location.href.replace(o.location.hash,""));try{var $=n.fromJson(a);a=$}catch(n){}n.forEach(g,function(i,e){var t=null;n.isObject(a)&&n.isDefined(a[i])?t=a[i]:n.isString(a)&&(t=a),u[i]=""!==t?t:null});var d=t.search();if(s||(u=n.extend({},d,u)),n.isString(h)&&h!==S){var m=t.path(),v=f(o.location.hash.replace(t.url(),"")),b=c(u),L=h+"/"+v+(m=m?"/":"")+(b=b?"?"+b:"");o.location.href=L,i.debug(L)}else e(function(){t.search(u)})}var g,S=s[0],$=s[1];if(l.ngLocationSearch&&(S||$)){g=r.$eval(l.ngLocationSearch),g=n.isArray(g)?g:[l.ngLocationSearch];var d=null,m=function(i){d=g.length>1?{}:null,n.forEach(g,function(e,t){n.isObject(d)?d[e]=n.isDefined(i[e])?i[e]:null:n.isDefined(i[e])&&(d=i[e])}),n.isObject(d)&&(d=n.toJson(d)),(0,a(l.ngModel).assign)(r,d)},v=function(i){var e=r.$eval(l.ngSubmit);!e&&n.isObject(e)||(n.isUndefined(r[l.ngSubmit])&&(r[l.ngSubmit]={}),n.forEach(g,function(e,t){n.isDefined(i[e])&&(r[l.ngSubmit][e]=i[e])}))};S&&(r.$watch(function(){return S.$modelValue},function(n,i){n!==i&&h(n)}),r.$on("$locationChangeStart",function(n,i,e,o,a){m(t.search())}),m(t.search())),$&&(u.on("submit",function(){var n=r.$eval(l.ngSubmit);n&&h(n)}),r.$on("$locationChangeStart",function(n,i,e,o,a){v(t.search())}),v(t.search()))}r.$on("$destroy",function(){n.isDefined(r[l.ngSubmit])&&delete r[l.ngSubmit]})}}}])}(window.angular);