!function(y){"use strict";y.module("ngLocationSearch",[]).directive("ngLocationSearch",["$log","$timeout","$location","$window","$parse","$httpParamSerializer",function(b,L,O,x,l,w){return{restrict:"A",require:["?ngModel","?^form"],link:function(S,n,v,e){var m,i=e[0],t=e[1];function p(n){return!!y.isString(n)&&n.replace(/\/$/,"")}function a(t){var a={},n=S.$eval(v.ngLocationSearchReplace),e=S.$eval(v.ngLocationSearchReset),i=p(v.ngLocationSearchUrl),o=p(x.location.href.replace(x.location.hash,""));try{var c=y.fromJson(t);t=c}catch(n){}y.forEach(m,function(n,e){var i=null;y.isObject(t)&&y.isDefined(t[n])?i=t[n]:y.isString(t)&&(i=t),a[n]=""!==i?i.toString():null});var r=O.search();if(!y.equals(a,r))if(e||(a=y.extend({},r,a)),y.isString(i)&&i!==o){var l=0!==i.indexOf("/"),s=-1!==i.indexOf("#!/")||-1!==i.indexOf("#/"),u=0===i.indexOf(O.protocol()),f=O.path(),h=p(x.location.hash.replace(O.url(),"")),g=w(a),$="";if(!O.$$html5||u)$=i+(g=g?"?"+g:""),!s&&u&&($=i+h+(f=f&&!O.$$html5?"/":"")+g),x.location.href=$;else{if(O.search(g),n&&S.$apply(),l){var d=f.split("/");$=d[d.length-1]===i?f:f+"/"+i}else $=i;O.path($),S.$apply()}b.debug($)}else L(function(){O.search(a)})}if(v.ngLocationSearch&&(i||t)){m=S.$eval(v.ngLocationSearch),m=y.isArray(m)?m:[v.ngLocationSearch];var o=null,c=function(i){o=1<m.length?{}:null,y.forEach(m,function(n,e){y.isObject(o)?o[n]=y.isDefined(i[n])?i[n]:null:y.isDefined(i[n])&&(o=i[n])}),y.isObject(o)&&(o=y.toJson(o)),(0,l(v.ngModel).assign)(S,o)},r=function(i){if(0<m.length){var n=S.$eval(v.ngSubmit);o={},y.forEach(m,function(n,e){y.isDefined(i[n])&&(o[n]=i[n])}),n=y.isObject(n)?n:{},o=y.extend(n,o),(0,l(v.ngSubmit).assign)(S,o)}};i&&(S.$watch(function(){return i.$modelValue},function(n,e){n!==e&&i.$valid&&a(n)}),S.$on("$locationChangeStart",function(n,e,i,t,a){c(O.search())}),c(O.search())),t&&(n.on("submit",function(){var n=S.$eval(v.ngSubmit),e=S.$eval(v.name);!n||e&&!e.$valid||a(n)}),S.$on("$locationChangeStart",function(n,e,i,t,a){r(O.search())}),r(O.search()))}S.$on("$destroy",function(){y.isDefined(S[v.ngSubmit])&&delete S[v.ngSubmit]})}}}])}(window.angular);